if("undefined"==typeof magento)var magento={}
magento.glossary={terms:[],init:function(t,e){$.get(t,function(t){glossary=magento.glossary,glossaryData=$($.parseXML(t)),glossaryData.find("term").each(glossary.processTerm),e()},"text")},processTerm:function(){var t=$(this),e=magento.glossary
e.terms.push(e.unserializeTerm(t))},unserializeTerm:function(t){var e={}
return e.id=t.find("uuid").text(),e.title=t.find("title").text(),e.wordTypes=t.find("word-types").text().trim().split(/\s+/).join(", "),e.longDefinition=t.find("long-definition").text(),e.shortDefinition=t.find("short-definition").text(),e.userTagsArray=t.find("user-tags").text().trim().split(/\s+/).map(function(t){return t.toLowerCase()}),e.contentTagsArray=t.find("content-tags").text().trim().replace(/(\w)\s(\w)/,"$1-$2").split(/\s\s+/).map(function(t){return t.toLowerCase()}),e.primarySource=t.find("primary-source").text().toLowerCase(),e}},magento.glossary.page={init:function(){magento.glossary.page.filter.init(),magento.glossary.page.insertGroupLinks()},insertTerms:function(t){function e(t){magento.glossary.page.toggleDisplay(t.target,"Show Metadata","Hide Metadata",".metadata")}function r(t){magento.glossary.page.toggleDisplay(t.target,"More","Less",".long-definition")}"undefined"==typeof t&&(t=magento.glossary.terms)
for(var a=0;a<t.length;a++){var n=t[a].title.toUpperCase().charAt(0),i=$("#termTemplate").html(),s=$("#termGroupTemplate").html()
0==$("#"+n+"-container").length&&$(Mustache.render(s,{group:n})).appendTo("#glossary-terms"),$(Mustache.render(i,t[a])).insertBefore("#"+n+"-container a")}magento.glossary.page.filter.applyUrlFilter(),$(".term-data .toggle-metadata").click(e),$(".term-data .show-definition").click(r)},toggleDisplay:function(t,e,r,a){var n=$(a,$(t).parentsUntil(".term",".term-data"))
n.hasClass("hidden")?(n.addClass("show").removeClass("hidden"),$(t).text(r)):(n.addClass("hidden").removeClass("show"),$(t).text(e))},insertGroupLinks:function(){var t=magento.glossary.page.renderer
t.render("./js/templates/termGroupLink.mst",{groups:[{targetAnchor:"A",buttonText:"A-C",id:"a-c"},{targetAnchor:"D",buttonText:"D-F",id:"d-f"},{targetAnchor:"G",buttonText:"G-I",id:"g-i"},{targetAnchor:"J",buttonText:"J-L",id:"j-l"},{targetAnchor:"M",buttonText:"M-O",id:"m-o"},{targetAnchor:"P",buttonText:"P-R",id:"p-r"},{targetAnchor:"S",buttonText:"S-U",id:"s-u"},{targetAnchor:"V",buttonText:"V-Z",id:"v-z"},{targetAnchor:"",buttonText:"Back to Top",id:"top"}]},function(t){$("#term-groups").append(t)})}},magento.glossary.page.filter={init:function(){var t=magento.glossary.page.filter
t.appendTagFilter("Audience","checkbox","user-tag",null,[{id:"developer",text:"Developer"},{id:"merchant",text:"Merchant"},{id:"internal",text:"Internal"}],$("#user-tags")),t.appendTagFilter("Content Type","radio","content-tag","content-type",[{id:null,text:"All"},{id:"business-marketing",text:"Business/Marketing"},{id:"design",text:"Design"},{id:"magento-software",text:"Magento Software"},{id:"pricing",text:"Pricing"},{id:"product",text:"Product"},{id:"programming",text:"Programming"}],$("#content-tags")),t.appendTagFilter("Primary Source","radio","source","primary-source",[{id:null,text:"All"},{id:"design",text:"Design"},{id:"devdocs",text:"DevDocs"},{id:"marketing",text:"Marketing"},{id:"training",text:"Training"}],$("#primary-source"))},appendTagFilter:function(t,e,r,a,n,i){var s=($("#tagFilterTemplate").html(),magento.glossary.page.renderer)
s.render("./js/templates/tagFilterTemplate.mst",{label:t,inputType:e,prefix:r,name:a,options:n},function(t){i.append(t),$(".filter input").click(magento.glossary.page.filter.updateFilter)})},getUrlParams:function(t){var e=t?t.split("?")[1]:window.location.search.slice(1),r={}
if(e)for(var a=e.split("&"),n=0;n<a.length;n++){var i=a[n].split("=")
r[i[0]]?r[i[0]].push(i[1].toLowerCase()):r[i[0]]=[i[1].toLowerCase()]}return r},applyFilters:function(t){void 0==typeof t&&(t=magento.glossary.page.filter.filterClassList),$(".term").removeClass("show").addClass("hidden")
var e=t.map(function(t){return t?"."+t:""}).join("")
$(".term"+e).removeClass("hidden").addClass("show")},updateFilter:function(){filterClassList=[],$(".filter input:checked").each(function(){filterClassList.push($(this).val())}),magento.glossary.page.filter.applyFilters(filterClassList)},applyUrlFilter:function(){var t=magento.glossary.page.filter
urlParams=t.getUrlParams()
var e=[]
if(urlParams.source&&e.push("source-"+urlParams.source[0]),urlParams.audience)for(var r=0;r<urlParams.audience.length;r++)e.push("user-tag-"+urlParams.audience[r])
urlParams.content&&e.push("content-tag-"+urlParams.content[0]),t.applyFilters(e)}},magento.glossary.page.renderer={cache:{},init:function(){},render:function(t,e,r){var a=magento.glossary.page.renderer
a.cache[t]?r(Mustache.render(a.cache[t],e)):$.get(t,function(n){a.cache[t]=n,r(Mustache.render(n,e))})}}
